{% extends "base.html" %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <!-- Hero Section -->
    <div class="bg-white rounded-lg shadow-lg p-8 mb-8">
        <div class="text-center">
            <h2 class="text-3xl font-bold text-gray-800 mb-4">Análisis de Imágenes Digitales</h2>
            <p class="text-gray-600 mb-6">
                Sube una imagen para analizar sus metadatos y obtener estadísticas detalladas de los canales RGB
            </p>
        </div>
    </div>

    <!-- Upload Section -->
    <div class="bg-white rounded-lg shadow-lg p-8">
        <h3 class="text-xl font-semibold text-gray-800 mb-6">Subir Imagen</h3>
        
        <form method="POST" action="/upload" enctype="multipart/form-data" class="space-y-6">
            <!-- File Upload Area -->
            <div class="border-2 border-dashed border-gray-300 rounded-lg p-12 text-center hover:border-unlu-light transition-colors duration-200">
                <div class="space-y-4">
                    <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                        <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <div>
                        <label for="file" class="cursor-pointer">
                            <span class="text-lg font-medium text-unlu-blue hover:text-unlu-light">Hacer clic para seleccionar</span>
                            <span class="text-gray-500"> o arrastrar y soltar</span>
                        </label>
                        <input id="file" name="file" type="file" class="sr-only" accept=".png,.jpg,.jpeg,.gif,.bmp,.tiff" required>
                    </div>
                    <p class="text-sm text-gray-500">PNG, JPG, JPEG, GIF, BMP, TIFF hasta 16MB</p>
                </div>
            </div>

            <!-- File Info Display -->
            <div id="file-info" class="hidden bg-blue-50 border border-blue-200 rounded-lg p-4">
                <div class="flex items-center">
                    <svg class="h-6 w-6 text-blue-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    <span id="file-name" class="text-blue-800 font-medium"></span>
                    <span id="file-size" class="text-blue-600 ml-2"></span>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="flex justify-center">
                <button type="submit" class="bg-unlu-blue hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg transition-colors duration-200 flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                    </svg>
                    Analizar Imagen
                </button>
            </div>
        </form>
    </div>

    <!-- Information Section -->
    <div class="grid md:grid-cols-2 gap-8 mt-8">
        <!-- Features -->
        <div class="bg-white rounded-lg shadow-lg p-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">Características del Análisis</h3>
            <ul class="space-y-3">
                <li class="flex items-start">
                    <svg class="w-5 h-5 text-green-500 mt-0.5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    <span class="text-gray-700">Extracción de metadatos EXIF completos</span>
                </li>
                <li class="flex items-start">
                    <svg class="w-5 h-5 text-green-500 mt-0.5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    <span class="text-gray-700">Estadísticas RGB: min, max, media, desviación</span>
                </li>
                <li class="flex items-start">
                    <svg class="w-5 h-5 text-green-500 mt-0.5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    <span class="text-gray-700">Histogramas interactivos por canal</span>
                </li>
                <li class="flex items-start">
                    <svg class="w-5 h-5 text-green-500 mt-0.5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    <span class="text-gray-700">Análisis estadístico avanzado</span>
                </li>
            </ul>
        </div>

        <!-- Supported Formats -->
        <div class="bg-white rounded-lg shadow-lg p-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">Formatos Soportados</h3>
            <div class="grid grid-cols-3 gap-3">
                <div class="bg-gray-50 rounded-lg p-3 text-center">
                    <div class="font-semibold text-gray-800">PNG</div>
                    <div class="text-sm text-gray-600">Portable Network Graphics</div>
                </div>
                <div class="bg-gray-50 rounded-lg p-3 text-center">
                    <div class="font-semibold text-gray-800">JPEG</div>
                    <div class="text-sm text-gray-600">Joint Photographic Experts Group</div>
                </div>
                <div class="bg-gray-50 rounded-lg p-3 text-center">
                    <div class="font-semibold text-gray-800">GIF</div>
                    <div class="text-sm text-gray-600">Graphics Interchange Format</div>
                </div>
                <div class="bg-gray-50 rounded-lg p-3 text-center">
                    <div class="font-semibold text-gray-800">BMP</div>
                    <div class="text-sm text-gray-600">Windows Bitmap</div>
                </div>
                <div class="bg-gray-50 rounded-lg p-3 text-center">
                    <div class="font-semibold text-gray-800">TIFF</div>
                    <div class="text-sm text-gray-600">Tagged Image File Format</div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.getElementById('file').addEventListener('change', function(e) {
    const file = e.target.files[0];
    const fileInfo = document.getElementById('file-info');
    const fileName = document.getElementById('file-name');
    const fileSize = document.getElementById('file-size');
    
    if (file) {
        fileName.textContent = file.name;
        fileSize.textContent = `(${(file.size / 1024 / 1024).toFixed(2)} MB)`;
        fileInfo.classList.remove('hidden');
    } else {
        fileInfo.classList.add('hidden');
    }
});

// Drag and drop functionality
const uploadArea = document.querySelector('.border-dashed');
const fileInput = document.getElementById('file');

['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
    uploadArea.addEventListener(eventName, preventDefaults, false);
});

function preventDefaults(e) {
    e.preventDefault();
    e.stopPropagation();
}

['dragenter', 'dragover'].forEach(eventName => {
    uploadArea.addEventListener(eventName, highlight, false);
});

['dragleave', 'drop'].forEach(eventName => {
    uploadArea.addEventListener(eventName, unhighlight, false);
});

function highlight(e) {
    uploadArea.classList.add('border-unlu-light', 'bg-blue-50');
}

function unhighlight(e) {
    uploadArea.classList.remove('border-unlu-light', 'bg-blue-50');
}

uploadArea.addEventListener('drop', handleDrop, false);

function handleDrop(e) {
    const dt = e.dataTransfer;
    const files = dt.files;
    
    if (files.length > 0) {
        fileInput.files = files;
        fileInput.dispatchEvent(new Event('change', { bubbles: true }));
    }
}
</script>
{% endblock %}